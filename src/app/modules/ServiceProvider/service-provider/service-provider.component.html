<div class="dashboard-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="profile-card">
      <div class="profile-content">
        <div class="profile-info">
          <div class="avatar-container">
            <img [src]="providerProfile?.Image" class="profile-avatar" alt="Provider Avatar" />
            <div class="status-badge">
              <i class="fas fa-check"></i>
            </div>
          </div>
          <div class="profile-details">
            <h2 class="profile-name">{{ providerProfile?.UserName }}</h2>
            <p class="profile-role">Verified Service Provider</p>
          </div>
        </div>
        <div class="profile-actions">
          <button routerLink="/EditProfile" class="btn-edit-profile">
            <i class="fas fa-edit"></i>
            <span>Edit Profile</span>
          </button>
          <button (click)="viewReviews(providerProfile.UserId)" class="btn-edit-profile">
            <i class="fas fa-search"></i>
            <span>View Reviews</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistics Section -->
  <div class="statistics-section">
    <div class="section-header">
      <h3 class="section-title">
        <i class="fas fa-chart-bar"></i>
        Proposal Analytics
      </h3>
    </div>
    <div class="stats-grid">
      <div class="stat-card" *ngFor="let card of proposalCards" [class.active]="selectedStatus === card.key"
        (click)="onCardSelect(card.key)">
        <div class="stat-icon" [ngClass]="card.key">
          <i class="fas" [ngClass]="{
               'fa-list': card.key === 'completed',
               'fa-check-circle': card.key === 'accepted',
               'fa-times-circle': card.key === 'rejected',
               'fa-clock': card.key === 'pending'
             }"></i>
        </div>
        <div class="stat-content">
          <h4 class="stat-number">{{ card.count }}</h4>
          <p class="stat-label">{{ card.label }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div class="content-section">
    <!-- Chart Section -->
    <div class="chart-section">
      <div class="chart-card">
        <div class="card-header">
          <h4 class="card-title">
            <i class="fas fa-chart-pie"></i>
            Proposal Distribution
          </h4>
        </div>
        <div class="chart-content">
          <canvas id="proposalPieChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Proposals List Section -->
    <div class="proposals-section">
      <div class="proposals-card">
        <div class="card-header">
          <h4 class="card-title">
            <i class="fas fa-file-alt"></i>
            {{ selectedStatus === 'completed' ? 'Completed Proposals' :
            selectedStatus === 'accepted' ? 'Accepted Proposals' :
            selectedStatus === 'rejected' ? 'Rejected Proposals' : 'Pending Proposals' }}
          </h4>
          <span class="item-count">{{ filteredProposals.length }} Items</span>
        </div>

        <div class="proposals-content">
          <div *ngIf="proposals && filteredProposals.length > 0; else noProposals" class="proposals-list">
            <div class="proposal-item" *ngFor="let proposal of filteredProposals; let i = index"
              [class]="proposal.Status.toString().toLowerCase()">

              <div class="proposal-header">
                <!-- <div class="proposal-title-section">
                  <h5 class="proposal-title">Proposal #{{ proposal.Id }}</h5>
                  <span class="proposal-status" [ngClass]="proposal.Status.toString().toLowerCase()">
                    {{ proposal.Status }}
                  </span>
                </div> -->
                <div class="proposal-price">
                  <span class="price-amount">{{ proposal.SuggestedPrice }} EGP</span>
                  <span class="price-label">Suggested Price</span>
                </div>
              </div>

              <div class="proposal-description">
                <p>{{ proposal.Description }}</p>
              </div>

              <div class="proposal-meta">
                <div class="meta-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span>{{ proposal.Date | date:'MMM dd, yyyy' }}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-hashtag"></i>
                  <span>ID: {{ proposal.Id }}</span>
                </div>
              </div>
            </div>
          </div>

          <ng-template #noProposals>
            <div class="empty-state">
              <div class="empty-icon">
                <i class="fas fa-inbox"></i>
              </div>
              <h5 class="empty-title">No Proposals Found</h5>
              <p class="empty-description">
                There are no proposals matching your selected status.
              </p>
            </div>
          </ng-template>
        </div>

      </div>
    </div>
  </div>

  <!-- Schedule Management Section -->
  <div class="schedule-section">
    <div class="schedule-card">
      <div class="card-header">
        <h4 class="card-title">
          <i class="fas fa-calendar-check"></i>
          Schedule Management
        </h4>
        <button routerLink="/EditSchedule" class="btn-schedule-edit">
          <i class="fas fa-edit"></i>
          <span>Edit Schedule</span>
        </button>
      </div>

      <div class="schedule-content">
        <div *ngIf="providerProfile && providerProfile.Schedules.length > 0; else noSchedule" class="schedule-grid">
          <div class="schedule-day" *ngFor="let schedule of providerProfile.Schedules">
            <div class="day-header">
              <h6 class="day-name">{{ getDayName(schedule.WorKDay) }}</h6>
            </div>
            <div class="day-time">
              <i class="fas fa-clock"></i>
              <span>{{ schedule.AvailableFrom }} - {{ schedule.AvailableTo }}</span>
            </div>
          </div>
        </div>

        <ng-template #noSchedule>
          <div class="empty-state">
            <div class="empty-icon">
              <i class="fas fa-calendar-times"></i>
            </div>
            <h5 class="empty-title">No Schedule Set</h5>
            <p class="empty-description">Set your working hours to receive bookings</p>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>