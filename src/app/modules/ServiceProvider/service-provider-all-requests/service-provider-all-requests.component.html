 <div class="requests-page">
        <!-- Page Header -->
        <div class="page-header">
            <div class="container-fluid px-4 py-5">
                <div class="text-center position-relative" style="z-index: 2;">
                    <h1 class="page-title">
                        <i class="fas fa-clipboard-list me-3"></i>
                        Service Requests
                    </h1>
                    <p class="page-subtitle">Discover The Newest Requests</p>
                </div>
            </div>
        </div>

        <!-- Search Form -->
        <div class="search-section">
            <div class="container-fluid px-4">
                <div class="search-wrapper p-4" *ngIf="searchForm">
                    <div class="text-center mb-4">
                        <h3 class="mb-2">
                            <i class="fas fa-search me-2"></i>
                            Advanced Search
                        </h3>
                        <p class="text-muted">Find exactly what you're looking for</p>
                    </div>

                    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
                        <div class="row g-3 mb-4">
                            <div class="col-md-6 col-lg-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-heading me-2"></i>
                                    Request Title
                                </label>
                                <input type="text" class="form-control" formControlName="title" placeholder="Search by title..." />
                            </div>

                            <div class="col-md-6 col-lg-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-file-alt me-2"></i>
                                    Description
                                </label>
                                <input type="text" class="form-control" formControlName="description" placeholder="Search by description..." />
                            </div>

                            <div class="col-md-6 col-lg-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-map-marker-alt me-2"></i>
                                    Address
                                </label>
                                <input type="text" class="form-control" formControlName="address" placeholder="Search by address..." />
                            </div>

                            <div class="col-md-6 col-lg-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-tags me-2"></i>
                                    Category
                                </label>
                                <select class="form-select" formControlName="categoryId">
                                    <option value="All-Category">All Categories</option>
                                    <option *ngFor="let category of categories" [value]="category.Id">
                                        {{ category.Name }}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-search me-3">
                                <i class="fas fa-search me-2"></i>
                                Search
                            </button>
                            <button type="button" class="btn btn-reset" (click)="searchForm.reset()">
                                <i class="fas fa-undo me-2"></i>
                                Reset
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Requests Grid -->
        <div class="container-fluid px-4 py-5">
            <!-- Section Header -->
            <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
                <h2 class="section-title mb-0">
                    <i class="fas fa-list me-2"></i>
                    Available Requests
                </h2>
                <span class="requests-count">{{ totalCount }} Request{{ totalCount !== 1 ? 's' : '' }}</span>
            </div>

            <!-- Requests Grid -->
            <div class="row g-4">
                <div *ngFor="let request of requests" class="col-xl-6 col-lg-6 col-md-12">
                    <div class="request-card h-100">
                        <!-- Card Header -->
                        <div class="card-header-custom">
                            <div class="row">
                                <div class="col-md-8">
                                    <h3 class="request-title">
                                        <i class="fas fa-file-contract me-2"></i>
                                        {{ request.Title || 'Untitled' }}
                                    </h3>
                                    <div class="request-meta">
                                        <span class="meta-item">
                                            <i class="far fa-calendar"></i>
                                            {{ request.Date | date:'mediumDate' }}
                                        </span>
                                        <span class="meta-item">
                                            <i class="far fa-clock"></i>
                                            Since {{ getTimeSince(request.Date) }}
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="d-flex align-items-center justify-content-end">
                                        <div class="client-avatar me-3">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="text-start">
                                            <div class="client-name">
                                                {{ usersDetails[request.ClientId] || 'Loading...' }}
                                            </div>
                                            <div class="client-label">Client</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Body -->
                        <div class="p-4">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="detail-item text-center">
                                        <div class="detail-icon category-icon mx-auto">
                                            <i class="fas fa-tag"></i>
                                        </div>
                                        <div class="detail-label">Category</div>
                                        <div class="detail-value">
                                            {{ request.CategoryName || getCategoryName(request.CategoryServicesId) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="detail-item text-center">
                                        <div class="detail-icon location-icon mx-auto">
                                            <i class="fas fa-map-marker-alt"></i>
                                        </div>
                                        <div class="detail-label">Address</div>
                                        <div class="detail-value">{{ request.Address }}</div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="detail-item text-center">
                                        <div class="detail-icon date-icon mx-auto">
                                            <i class="fas fa-calendar-check"></i>
                                        </div>
                                        <div class="detail-label">Due Date</div>
                                        <div class="detail-value">{{ request.DueDate | date:'mediumDate' }}</div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="detail-item text-center">
                                        <div class="detail-icon budget-icon mx-auto">
                                            <i class="fas fa-dollar-sign"></i>
                                        </div>
                                        <div class="detail-label">Budget</div>
                                        <div class="detail-value budget-amount">{{ request.StartPrice }} EGP</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Footer -->
                        <div class="card-footer-custom text-center">
                            <button class="btn btn-view-details" (click)="viewRequestDetails(request.Id)">
                                <i class="fas fa-eye me-2"></i>
                                View Details
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div class="pagination-style" *ngIf="totalCount > pageSize">
            <ul class="ngx-pagination">
                <li [class.disabled]="currentPage === 1">
                    <a (click)="goToPage(1)" aria-label="First">
                        <i class="fas fa-angle-double-left"></i>
                    </a>
                </li>

                <li [class.disabled]="currentPage === 1">
                    <a (click)="goToPage(currentPage - 1)" aria-label="Previous">
                        <i class="fas fa-angle-left"></i>
                    </a>
                </li>

                <li *ngFor="let page of pages" [class.current]="page === currentPage">
                    <a (click)="goToPage(page)">{{ page }}</a>
                </li>

                <li [class.disabled]="currentPage === totalPages">
                    <a (click)="goToPage(currentPage + 1)" aria-label="Next">
                        <i class="fas fa-angle-right"></i>
                    </a>
                </li>

                <li [class.disabled]="currentPage === totalPages">
                    <a (click)="goToPage(totalPages)" aria-label="Last">
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>