<div class="property-details" *ngIf="property">
  <!-- Header Section -->
  <div class="property-header">
    <div class="property-title">
      <h1>{{property.NumberOfRooms}}-Bedroom Property In {{property.Street}}</h1>
      <div class="property-location">
        <i class="location-icon">üìç</i>
        <span>{{property.Address}}, {{property.City}}, {{property.Region}}</span>
      </div>
    </div>
    <div class="property-status">
      <span class="status-badge" [class]="verificationStatusClass">
        {{verificationStatusText}}
      </span>
      <span class="rental-type" *ngIf="property.IsForRent">For Rent</span>
    </div>
  </div>

  <!-- Image Gallery -->
  <div class="image-gallery" *ngIf="property.Images && property.Images.length > 0">
    <div class="main-image">
      <img [src]="property.Images[currentImageIndex]" 
           [alt]="'Property image ' + (currentImageIndex + 1)">
      <button class="nav-btn prev-btn" (click)="prevImage()" *ngIf="property.Images.length > 1">‚Äπ</button>
      <button class="nav-btn next-btn" (click)="nextImage()" *ngIf="property.Images.length > 1">‚Ä∫</button>
    </div>
    <div class="image-thumbnails" *ngIf="property.Images.length > 1">
      <img *ngFor="let image of property.Images; let i = index"
           [src]="image"
           [alt]="'Thumbnail ' + (i + 1)"
           [class.active]="i === currentImageIndex"
           (click)="selectImage(i)">
    </div>
  </div>

  <!-- Main Content -->
  <div class="property-content">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Property Info -->
      <div class="property-info">
        <h2>Property Details</h2>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Rooms:</span>
            <span class="value">{{property.NumberOfRooms}}</span>
          </div>
          <div class="info-item">
            <span class="label">Building:</span>
            <span class="value">{{property.BuildingNo}}</span>
          </div>
          <div class="info-item">
            <span class="label">Floor:</span>
            <span class="value">{{property.FloorNo}}</span>
          </div>
          <div class="info-item">
            <span class="label">Street:</span>
            <span class="value">{{property.Street}}</span>
          </div>
        </div>
      </div>

      <!-- Description -->
      <div class="description-section">
        <h2>Description</h2>
        <p>{{property.Description}}</p>
      </div>

      <!-- Amenities -->
      <div class="amenities-section">
        <h2>Amenities</h2>
        <div class="amenities-grid">
          <div class="amenity-item" *ngFor="let amenity of amenitiesList">
            <i class="amenity-icon">‚úì</i>
            <span>{{amenity}}</span>
          </div>
        </div>
      </div>

      <!-- Location -->
      <div class="location-section">
        <h2>Location</h2>
        <div class="location-details">
          <p><strong>Full Address:</strong> {{property.Address}}, {{property.Street}}, {{property.City}}, {{property.Region}}</p>
          <button class="map-btn" (click)="openMap()">
            <i class="map-icon">üó∫Ô∏è</i>
            View on Map
          </button>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="right-column">
      <!-- Pricing Card -->
      <div class="pricing-card">
        <div class="price">
          <span class="amount">${{property.PricePerNight}}</span>
          <span class="period">/ night</span>
        </div>
        
        <div class="booking-actions">
          <button class="book-btn" (click)="openBookingModal()">
            Book Now
          </button>
          <button class="contact-btn" (click)="toggleContactInfo()">
            Contact Owner
          </button>
        </div>

        <!-- Cancellation Info -->
        <div class="cancellation-info">
          <h3>Cancellation Policy</h3>
          <div class="policy-item">
            <span class="policy-label">Options Available:</span>
            <span class="policy-value">{{property.CancelationOptions ? 'Yes' : 'No'}}</span>
          </div>
          <div class="policy-item" *ngIf="property.CancelationOptions">
            <span class="policy-label">Charges:</span>
            <span class="policy-value">${{property.CancelationCharges}}</span>
          </div>
        </div>
      </div>

      <!-- Owner Info -->
      <div class="owner-info" *ngIf="property.PropertyOwner">
        <h3>Property Owner</h3>
        <div class="owner-details">
          <div class="owner-name">{{property.PropertyOwner}}</div>
          <div class="contact-info" *ngIf="showContactInfo">
            <!-- <p><strong>Email:</strong> {{property.propertyOwner.email}}</p> -->
            <p><strong>Email:</strong> {{property.PhoneNumber}}</p>
            <p><strong>Phone:</strong> {{property.PhoneNumber}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Booking Modal -->
<div class="modal-overlay" *ngIf="isBookingModalOpen" (click)="closeBookingModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Book Property</h2>
      <button class="close-btn" (click)="closeBookingModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="booking-summary">
        <h3>Booking Summary</h3>
        <p><strong>Property:</strong> {{property?.NumberOfRooms}}-Bedroom in {{property?.City}}</p>
        <p><strong>Price:</strong> ${{property?.PricePerNight}} / night</p>
        <p><strong>Cancellation Charges:</strong> ${{property?.CancelationCharges}}</p>
      </div>
      <div class="booking-form">
        <div class="form-group">
          <label>Check-in Date:</label>
          <input type="date" class="form-control" [(ngModel)]="bookingData.checkIn">
        </div>
        <div class="form-group">
          <label>Check-out Date:</label>
          <input type="date" class="form-control" [(ngModel)]="bookingData.checkOut">
        </div>
        <div class="form-group">
          <label>Number of Guests:</label>
          <select class="form-control" [(ngModel)]="bookingData.guests">
            <option *ngFor="let g of [1,2,3,4]" [value]="g">{{g}} Guest(s)</option>
          </select>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="cancel-btn" (click)="closeBookingModal()">Cancel</button>
      <button class="confirm-btn" (click)="onBookProperty()">Confirm Booking</button>
    </div>
  </div>
</div>