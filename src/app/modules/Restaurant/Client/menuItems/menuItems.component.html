<div class="container-fluid px-5 my-4">

  <!-- Main Content -->
  <div class="row g-3">
    <!-- Sidebar -->
    <div class="col-lg-2 mb-4">
      <div class="sidebar">
        <button class="All-Meals">
          <i class="fa-solid fa-filter"></i>
          <span>Menu Filter</span>
        </button>

        <button class="deals-btn" (click)="getMenu()">
          <i class="fa-solid fa-table-list"></i>
          <span>All Menus</span>
        </button>
        <button class="deals-btn">
          <i class="fas fa-fire"></i>
          <span>Offers</span>
        </button>

        <!-- Price Range -->
        <div class="filter-group">
          <div class="filter-title">
            <i class="fas fa-dollar-sign"></i>Price Range
          </div>
          <div class="price-range-container">
            <div class="price-slider">
              <div class="price-progress" id="priceProgress" [ngStyle]="{
                left: minPercent + '%',
                width: (maxPercent - minPercent) + '%'
              }">
              </div>
              <input #minPrice type="range" min="0" max="50" [value]="minValue" class="range-input" id="minPriceRange"
                (input)="onPriceChange(+minPrice.value, +maxPrice.value)">
              <input #maxPrice type="range" min="50" max="100" [value]="maxValue" class="range-input" id="maxPriceRange"
                (input)="onPriceChange(+minPrice.value, +maxPrice.value)">
            </div>
            <div class="price-values">
              <strong>$<span id="minPriceValue">{{minValue}}</span> - $<span
                  id="maxPriceValue">{{maxValue}}</span></strong>
            </div>
            <input type="hidden" id="minPrice" name="minPrice" value="0">
            <input type="hidden" id="maxPrice" name="maxPrice" value="100">
          </div>
        </div>

        <!-- Availability Status -->
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-check-circle icon-availability"></i>Availability Status
          </div>
          <div class="form-check">
            <input #availableStatus class="form-check-input" type="checkbox" value="Available" id="availableStatus"
              name="availabilityStatus" (change)="onAvailableStatus(availableStatus.value , availableStatus.checked)">
            <label class="form-check-label" for="availableStatus">
              <i class="fas fa-check-circle me-2"></i>Available</label>
          </div>
          <div class="form-check">
            <input #outofstockStatus class="form-check-input" type="checkbox" value="OutOfStock" id="outOfStockStatus"
              name="availabilityStatus" (change)="onAvailableStatus(outofstockStatus.value , outofstockStatus.checked)">
            <label class="form-check-label" for="outOfStockStatus">
              <i class="fas fa-times-circle me-2"></i>Out of Stock</label>
          </div>
          <div class="form-check">
            <input #soldoutStatus class="form-check-input" type="checkbox" value="SoldOut" id="SoldOutStatus"
              name="availabilityStatus" (change)="onAvailableStatus(soldoutStatus.value , soldoutStatus.checked)">
            <label class="form-check-label" for="discontinuedStatus">
              <i class="fas fa-ban me-2"></i>Sold Out</label>
          </div>
          <div class="form-check">
            <input #comingsoonStatus class="form-check-input" type="checkbox" value="ComingSoon" id="ComingSoonStatus"
              name="availabilityStatus" (change)="onAvailableStatus(comingsoonStatus.value , comingsoonStatus.checked)">
            <label class="form-check-label" for="discontinuedStatus">
              <i class="fas fa-clock me-2"></i>Coming Soon</label>
          </div>
          <div class="form-check">
            <input #seasonalStatus class="form-check-input" type="checkbox" value="Seasonal" id="SeasonalStatus"
              name="availabilityStatus" (change)="onAvailableStatus(seasonalStatus.value , seasonalStatus.checked)">
            <label class="form-check-label" for="discontinuedStatus">
              <i class="fas fa-leaf me-2"></i>Seasonal</label>
          </div>
        </div>




        <!-- Food Category -->
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-utensils icon-category"></i>Food Category
          </div>
          <div class="form-check">

            <input #appetizerCat class="form-check-input" type="checkbox" value="Appetizer" id="appetizerCategory"
              name="foodCategory" (change)="onCategoryFood(appetizerCat.value , appetizerCat.checked)">

            <label class="form-check-label" for="appetizerCategory">
              <i class="fas fa-seedling me-2"></i>Appetizer
            </label>
          </div>
          <div class="form-check">

            <input #maincourseCat class="form-check-input" type="checkbox" value="MainCourse" id="mainCourseCategory"
              name="foodCategory" (change)="onCategoryFood(maincourseCat.value , maincourseCat.checked)">

            <label class="form-check-label" for="mainCourseCategory">
              <i class="fas fa-drumstick-bite me-2"></i>Main Course
            </label>
          </div>
          <div class="form-check">

            <input #dessertCat class="form-check-input" type="checkbox" value="Beverage" id="beverageCategory"
              name="foodCategory" (change)="onCategoryFood(dessertCat.value , dessertCat.checked)">
            <label class="form-check-label" for="dessertCategory">
              <i class="fas fa-ice-cream me-2"></i>Dessert
            </label>


          </div>
          <div class="form-check">


            <input #beverageCat class="form-check-input" type="checkbox" value="Beverage" id="beverageCategory"
              name="foodCategory" (change)="onCategoryFood(beverageCat.value , beverageCat.checked)">
            <label class="form-check-label" for="beverageCategory">
              <i class="fas fa-coffee me-2"></i>Beverage
            </label>


          </div>
          <div class="form-check">


            <input #snaksCat class="form-check-input" type="checkbox" value="Snacks" id="snackCategory"
              name="foodCategory" (change)="onCategoryFood(snaksCat.value , snaksCat.checked)">
            <label class="form-check-label" for="snackCategory">
              <i class="fas fa-cookie-bite me-2"></i>Snacks
            </label>


          </div>

          <div class="form-check">
            <input #meatSeafoodCat class="form-check-input" type="checkbox" value="Snack" id="snackCategory"
              name="foodCategory" (change)="onCategoryFood(meatSeafoodCat.value , meatSeafoodCat.checked)">
            <label class="form-check-label" for="snackCategory">
              <i class="fas fa-fish me-2"></i>Meat & Seafood
            </label>


          </div>





          <div class="form-check">
            <input #otherCat class="form-check-input" type="checkbox" value="Snack" id="snackCategory"
              name="foodCategory" (change)="onCategoryFood(otherCat.value , otherCat.checked)">
            <label class="form-check-label" for="snackCategory">
              <i class="fas fa-ellipsis-h me-2"></i>Other
            </label>
          </div>


        </div>

        <!-- Size of Piece -->
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-expand-arrows-alt icon-size"></i>Size of Piece
          </div>
          <div class="form-check">

            <input #smallSize class="form-check-input" type="checkbox" value="Small" id="smallSize" name="sizeOfPiece"
              (change)="onSizeOfPiece(smallSize.value , smallSize.checked)">

            <label class="form-check-label" for="smallSize">
              <i class="fas fa-circle me-2" style="font-size: 0.6rem;"></i>Small
            </label>
          </div>
          <div class="form-check">

            <input #mediumSize class="form-check-input" type="checkbox" value="Medium" id="mediumSize"
              name="sizeOfPiece" (change)="onSizeOfPiece(mediumSize.value , mediumSize.checked)">

            <label class="form-check-label" for="mediumSize">
              <i class="fas fa-circle me-2" style="font-size: 0.8rem;"></i>Medium
            </label>
          </div>
          <div class="form-check">

            <input #largeSize class="form-check-input" type="checkbox" value="Large" id="largeSize" name="sizeOfPiece"
              (change)="onSizeOfPiece(largeSize.value , largeSize.checked)">

            <label class="form-check-label" for="largeSize">
              <i class="fas fa-circle me-2" style="font-size: 1rem;"></i>Large
            </label>
          </div>
          <div class="form-check">
            <input #extraLarge class="form-check-input" type="checkbox" value="ExtraLarge" id="extraLargeSize"
              name="sizeOfPiece" (change)="onSizeOfPiece(extraLarge.value , extraLarge.checked)">
            <label class="form-check-label" for="extraLargeSize">
              <i class="fas fa-circle me-2" style="font-size: 1.2rem;"></i>Extra Large
            </label>
          </div>
        </div>



        <!-- Duration -->
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-clock icon-duration"></i>Duration (minutes)
          </div>
          <input #durationInput type="number" class="form-control" id="duration" name="duration"
            placeholder="Enter duration" step="1" min="0" [value]="duration"
            (input)="onDurationChange(+durationInput.value)">
        </div>

        <!-- Sort Options -->
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-sort icon-sort"></i>Sort Options
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="descending" name="descending">
            <label class="form-check-label" for="descending">
              <i class="fas fa-sort-amount-down me-2"></i>Descending Order
            </label>
          </div>
        </div>

        <!-- Apply Filters Button -->
        <div class="apply-filters-btn">
          <button type="button" class="btn-apply-filters" (click)="applyFilters()">
            <i class="fas fa-search me-2"></i>Apply Filters
          </button>
          <button type="button" class="btn-clear-filters" (click)="clearAllFilters()">
            <i class="fas fa-times me-2"></i>Clear All Filters
          </button>
        </div>
      </div>
    </div>



    <!-- meals Section -->
    <div class="col-lg-10">
      <div class="content-section">

        <div class="search-and-filter search-box rounded shadow p-2">
          <div class="row g-3 align-items-center">

            <!-- 🔍 Search -->
            <div class="col-md-5 d-flex">
              <input #searchInput type="text" class="form-control me-2" placeholder="Search For your Meal...">
              <button class="btn  search-btn" (click)="onSearch(searchInput.value)">
                <i class="fas fa-search"></i>
              </button>
            </div>

            <!-- 🧮 Meals Found -->
            <div class="col-md-2 text-md-center">
              <span class="badge bg-secondary rounded-pill me-1">{{menu.length}}</span>
              <span class="text-muted">Meals found</span>
            </div>

            <!-- 🔢 Show -->
            <div class="col-md-2 d-flex align-items-center">
              <label class="me-2 mb-0 text-muted">Show:</label>
              <select class="form-select w-auto show-dropdown" (change)="onPageSizeChange($event)">
                <option [value]="12">12</option>
                <option [value]="24">24</option>
                <option [value]="36">36</option>
              </select>
            </div>


            <!-- ↕️ Sort By -->
            <div class="col-md-3 d-flex align-items-center">
              <label class="me-2 mb-0 text-muted">Sort by:</label>
              <select class="form-select w-auto">
                <option>Featured</option>
                <option>Price: Low to High</option>
                <option>Price: High to Low</option>
                <option>Newest</option>
              </select>
            </div>

          </div>
        </div>


        <div class="menu-items">
          <!-- Loop over paginated menu items -->
          <app-meal-card
            *ngFor="let meal of menu | paginate: { itemsPerPage: 12, currentPage: currentPage }; let i = index"
            [meals]="meal" (click)="onMealClick(meal)">
          </app-meal-card>
        </div>



      </div>
      <!-- Pagination controls -->
      <pagination-controls (pageChange)="currentPage = $event" class="pagination-style minimal">
      </pagination-controls>

    </div>
  </div>
